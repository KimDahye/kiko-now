
---
layout: post
title: "학습일지 2016-06"
tags: [study diary, 학습일지]
comments: true
---


## 6/1
- response time을 줄이기 위해, 하나씩 for문으로 DB다녀오던 것을, 모두 batch로 바꾸기. -> 선배의 코드리뷰 후, 다시 개발해야 함.
  - 목적에 따라 융통성을 부려야 하는데, 나는 A 케이스에선 명확성이 우선순위 1이니, A' 케이스에서도 명확성을 우선순위 1로 하였는데, 사실 A'을 만든 이유는 명확하게 짜는 것 보다, response time을 줄이는 것이기 때문에 명확성을 좀 포기할 수도 있었다. 이것을 지적해주심. 
  - 여튼 이 판단미스로 인해 오늘 배포하려던 것을 못하고 내일로 배포가 미뤄짐. 이미 오늘 배포한다고 말씀드렸는데, 내일 배포하면서 죄송하다 말씀드려야지. 아직은 일정추정에 예상치 못한 변수들을 잘 고려하지 못하고 있다... 한 2시간 정도는 예상치 못한 이슈를 처리하느라 비워둬야 하는 걸까? 아니면 미리 배포를 미룬다고 양해를 구해야하는 걸까.

## 6/3 금
휴가 였으나 내가 짠 코드가 예외를 발생시켜 집에 돌아와서 파봤다.
### 배운 것
* 코드를 짤 때 기존에 있던 A 메서드를 사용하였는데, A 메서드를 깊숙히 파보니까 메서드를 사용할 때 지켜야할 전제가 있었다. 하지만 이번에 이 상황을 파악하지 못하고, 전제사항을 지키지 않았기 때문에 에러 상황이 발생하였다. (그리고 새로 고친 api만 테스트하였기 때문에 에러 상황을 발견하지 못하였다.)
* 우리셀에서 만든 메서드를 사용할 때, 메서드의 설명과 어느정도 깊이까지만 읽고 사용하지 말고, 바닥까지 살펴보고 이 메서드를 사용할 때 지켜야할 전제가 있는지 살피자.
* 이와 별개로, 통합 테스트에 같은 DB에 접근하는 api에 대해서는 한 테스트 케이스 안에서 호출해봤다면 에러상황을 알 수 있었겠지만..... 이렇게 만드는 것은 오버인 듯 싶기도.
* 전제사항이 버그가 아니었다면, A메서드에 주석을 추가해놔야 한다. 


## 6/14
- multi threading 환경... Runnable 로컬 변수를 글로벌하게 쓸 때 문제가 생길 수 있다. automic boolean, volatile을 고려해보고, 그래도 안되면 synchronized 고민해보자.


## 6/16 목
### 오늘 배운 것
- volatile -> 로컬변수로 snapshot 찍어서 사용하기. thread safe하게!
- 두가지 의미로 사용하던 변수를 분리하여 각각의 의미로.
- factory method pattern. 생성자보다 좋은 것은 메서드 이름을 다르게 줄 수 있다는 것! (effective java에서 배운 것을 진짜 써봤네)
- bug fix... (if문 조건 체크 반대로 함. 변수 이름을 잘 정했다면 이럴 확률이 감소했겠지! result -> isSuccess로 바꿈.)
- thread dump(`kill -3 [psnum]`)
- heap dump (java 프로그램 실행시, optoin으로 주면 된다. jmx 옵션 보자. ) -> jconsole로 기본적인 것 볼 수 있고, 여기서 heap dump를 뜨면, heap analyzer 로 object graph 볼 수 있다.

## 6/27 월
시간이 참 빠르다. 오늘은 내가 입사한지도 만 8개월이 되는 날이었다. 

오전에 셀 회고를 하면서 일이 재미없다고 고백했다. 이 고백을 하고나서도 혹시나 나를 건방지다고 생각하면 어찌하나 마음이 떨리곤 했지만, 그래도 내 고민을 얘기하고 나니 후련하긴 했다. 나의 이 고백에 한 선배는 내가 일을 재미없다고 느끼는 것은 너무 많은 관심사가 있는 것 때문이 아닐까라고 문제제기 해주셨다. 다양한 관심사가 있는 것은 좋지만, 업무에 집중을 못하고 일을 느리게 하는 것 같다는 피드백과 함께. (하지만 이 피드백에 대해서는 다른 분들이 그것은 그분의 기준에서 느린거지, 주니어 수준에서 이정도가 보통이라고 쉴드를 쳐주셔서 이것은 많이 마음에 두지는 않기로 하였다.) 이 얘기를 함께 들은 다른 선배는 지금 나의 시기는 다양한 신기술에 조바심을 느끼기 보다는 코드 level에서 완성도를 높여가는 시기라고, 지금 재미없을 수 있지만 전체적인 커리어를 생각했을 때 코드레벨에서 집중하는 시기가 꼭 필요하다고 조언해주셨다. (참. 이와 더불어 일정 추정도 훈련하는 시기라고 조언해주셨다.) 이 분의 조언이 많이 위로가 되었다. 그래, **유지보수를 하는 일이 재미없을 수 있지만, 이 시기를 지나 "코딩"에 자신감이 붙으면, 더 재밌는 것을 할 수 있다!** 

더불어 오늘은 내일 오전 8시 마이그레이션을 준비하는 날이었다. 내일의 시나리오를 작성하고, 시나리오 중 확인해야할 이슈를 챙기고, 미리 마이그레이션 전의 앱을 사용해보았다. 나는 시나리오를 작성하고 그것을 따라 스텝 바이 스텝으로 진행하는 것이 나의 롤이고, 내가 주도하는 것이라곤 생각을 안했던 것 같다. 그랬기에 해당 앱에 에러가 있었다는 걸 발견했으나 크게 생각하지 않았고 (이 결정엔 그 앱의 낮은 퀄리티를 보며 당연히 그 앱 개발사가 잘못 구현했으리란 교만한 편견도 한몫했다) 시나리오 작성을 2시간 이내로 마무리한 뒤 마이그레이션 관련 카톡방에서 오는 내용들을 실시간으로 팔로우업하진 않았었다(내가 이 일에 최대 2시간만 할애한 것만 보아도 내가 이 일을 주도하고 있다 생각하지 않았음을 알 수 있다). 이런 모습을 보고, 선배는 나의 책임감 없음을 지적해주셨다. 이것은 내가 주도하는 일이었고, 다른 선배가 혹시나 장애 상황을 대비해 백업해주는 것이었다고. 사실 나는 반대로 다른 선배가 주도하고 내가 더블체킹 수준으로 보조하는 것으로 생각하였지만.. 그 선배는 이미 이 말(내가 주도하는 것이라는 말!)이 세번째라고도 하셔서, 내가 이전에 정신 없이 선배들의 말을 흘려들었겠구나 싶었다(요즘 이렇게 이미 말씀하셨다고 하시는데, 새롭게 들리는 이슈들이 많은 걸로 보아 좀 정신없이 살았던 것 듯). 내일부터는 마이그레이션 작업에 대해 내가 주도하는 거라고, 책임감 있는 태도를 기대하겠다고 하셨고 - 나는 (혹시나 이 마이그레이션 작업에 대한 것 뿐 아니라 다른 일에 대해서도 말씀하신 거라면 어쩌지..라는 생각과 함께) 자신이 없었지만 , 일단 이 "마이그레이션" 이슈만큼은 이제 내가 책임지고 하는 일이구나 다짐해두었다. 

먼저는 감사하다. 나의 고민을 터놓을 수 있는 팀과, 내 고민을 들어주고 조언해주는 선배들이 있어서. 그리고 후배의 부족함을 담아두지 않고 바로 얘기해줄 수 있는 선배들이 있어서 감사하다. 하지만 여전히 마음이 무겁다. 나와 가정을 위해 야근을 거의 하지 않으려고 하는데 - 이 다짐이 나의 느린 업무 속도 때문에 무책임함으로 비춰져, 결국 나를 믿어준 이들을 실망시키진 않을까 두렵다. 그리고 이 두려움이 나를 다시 야근하게 만들고, 눈치보게 만들고, 할말을 용기있게 하지 못하게 만들까 두렵다. 나는 정말 두려움 투성이구나.. 업무 외 시간을 지켜내는 것과, 업무를 책임감 있게 수행하는 것을 균형있게 잡고 싶다... 기도하면서 마음이 추슬러지기를!

## 6/28 화
- DB 캐시엔, 캐시서버와 로컬 캐시가 있다! 로컬캐시는 zookeeper로 싱크 맞추는... 캐시서버와 로컬캐시의 각각의 특성은 캐시서버는 서버 하나가 다 캐시이기 때문에 대용량의 데이터를 저장할 수 있고, 하나라면 동기화할 필요가 없지만, 네트워크 비용이 발생한다는 단점이 있다. 로컬 캐시는 이와 반대로 로컬 메모리에 올라가는 것이기 때문에 용량을 크게 잡을 수 없고 각 서버군마다 로컬캐시를 동기화해주는 작업이 따로 필요하지만, 빠르다!
